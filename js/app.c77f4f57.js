(function(){"use strict";var t={6979:function(t,e,s){var n=s(5471),r=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{staticClass:"app-wrapper"},[e("div",{staticClass:"app-header"},[e("h1",[t._v("Horse Racing")]),e("race-controls")],1),e("div",{staticClass:"main-content"},[e("aside",{staticClass:"sidebar-left"},[e("horse-list")],1),e("main",{staticClass:"center-area"},[e("race-track")],1),e("aside",{staticClass:"sidebar-right"},[e("results-panel")],1)])])},a=[],o=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{staticClass:"controls"},[e("button",{staticClass:"button",on:{click:t.generateGame}},[t._v(" Generate Game ")]),e("button",{staticClass:"button",attrs:{disabled:!t.isReady},on:{click:t.startRace}},[t._v(" Start Race ")])])},i=[];function u(){var t=(0,n.nI)();if(!t)throw new Error("useStore must be called inside setup()");return t.proxy.$store}var c=(0,n.pM)({name:"RaceControls",setup(){const t=u(),e=(0,n.EW)(()=>"ready"===t.state.status),s=()=>{t.dispatch("generateGame")},r=()=>{t.dispatch("startRace")};return{isReady:e,generateGame:s,startRace:r}}}),l=c,d=s(1656),f=(0,d.A)(l,o,i,!1,null,"730fe555",null),v=f.exports,h=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{staticClass:"race-track"},[t.currentRound?e("div",{staticClass:"track-container"},[e("h2",[t._v("Round "+t._s(t.currentRound.id)+" - "+t._s(t.currentRound.distance)+"m")]),e("div",{staticClass:"track-wrapper"},[e("div",{staticClass:"lane-numbers"},t._l(t.currentRound.horseIds,function(s,n){return e("div",{key:`num-${s}`,staticClass:"lane-number"},[t._v(" "+t._s(n+1)+" ")])}),0),e("div",{staticClass:"lanes"},[t._l(t.currentRound.horseIds,function(s){return e("div",{key:s,staticClass:"lane"},[e("div",{staticClass:"lane-name"},[t._v(t._s(t.getHorseName(s)))]),e("div",{staticClass:"lane-track"},[e("div",{staticClass:"horse",style:{...t.getHorseStyle(s),backgroundColor:t.getHorseColor(s)}}),t.getHorsePosition(s)?e("div",{staticClass:"position-badge"},[t._v(t._s(t.getHorsePosition(s)))]):t._e()])])}),e("div",{staticClass:"finish-label"},[t._v("FINISH")])],2)])]):e("div",{staticClass:"no-race"},["idle"===t.status?e("p",[t._v('Click "Generate Game" to create new game')]):"ready"===t.status?e("div",{staticClass:"game-info"},[e("p",{staticClass:"info-title"},[t._v("Game generated!")]),e("p",[t._v("Horses: "+t._s(t.horsesCount))]),e("p",[t._v("Rounds: "+t._s(t.roundsCount))]),e("p",{staticClass:"info-subtitle"},[t._v('Click "Start Race" to start a competition')])]):"finished"===t.status?e("div",{staticClass:"winner-section"},[e("p",{staticClass:"winner-title"},[t._v("ðŸ† Winner:")]),e("p",{staticClass:"winner-name"},[t._v(t._s(t.getWinnerName()))]),e("p",{staticClass:"winner-subtitle"},[t._v("Full results are on the right >")])]):t._e()])])},p=[],_=(s(8111),s(116),s(7588),s(1701),(0,n.pM)({name:"RaceTrack",setup(){const t=u(),e=(0,n.KR)(new Map),s=(0,n.KR)(new Map),r=(0,n.EW)(()=>t.getters.currentRound),a=(0,n.EW)(()=>t.state.status),o=(0,n.EW)(()=>t.state.results),i=(0,n.EW)(()=>t.state.horses.length),c=(0,n.EW)(()=>t.state.rounds.length),l=e=>{const s=t.getters.getHorseById(e);return s?s.name:""},d=()=>{const t=o.value;if(0===t.length)return"";const e=new Map;t.forEach(t=>{t.standings.forEach((t,s)=>{const n=10-s,r=e.get(t.horseId)||0;e.set(t.horseId,r+n)})});let s=0,n=0;return e.forEach((t,e)=>{t>n&&(n=t,s=e)}),l(s)},f=e=>{const s=t.getters.getHorseById(e);return s?s.color:"#000"},v=t=>{const e=r.value;if(!e)return 0;const s=o.value.find(t=>t.roundId===e.id);if(!s)return 0;const n=s.standings.find(e=>e.horseId===t);return n?n.timeMs:0},h=t=>{const s=v(t),n=e.value.get(t),r=s>0&&n?1:0;return{left:95*r+"%",transition:s>0?`left ${s}ms linear`:"none"}},p=t=>{if(!s.value.get(t))return null;const e=r.value;if(!e)return null;const n=o.value.find(t=>t.roundId===e.id);if(!n)return null;const a=n.standings.findIndex(e=>e.horseId===t);return-1===a?null:a+1};return(0,n.wB)(r,t=>{t&&(e.value=new Map,s.value=new Map,setTimeout(()=>{e.value=new Map(t.horseIds.map(t=>[t,!0])),t.horseIds.forEach(t=>{const e=v(t);e>0&&setTimeout(()=>{s.value.set(t,!0),s.value=new Map(s.value)},e)})},50))}),{currentRound:r,status:a,horsesCount:i,roundsCount:c,getHorseName:l,getHorseColor:f,getHorseStyle:h,getHorsePosition:p,getWinnerName:d}}})),m=_,g=(0,d.A)(m,h,p,!1,null,"06cb9794",null),C=g.exports,b=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{staticClass:"results-panel"},[e("div",{staticClass:"tabs"},[e("button",{class:["tab",{active:"program"===t.activeTab}],on:{click:function(e){t.activeTab="program"}}},[t._v(" Program ")]),e("button",{class:["tab",{active:"results"===t.activeTab}],on:{click:function(e){t.activeTab="results"}}},[t._v(" Results ")])]),e("div",{staticClass:"tab-content"},["program"===t.activeTab?e("div",{staticClass:"program-section"},[0===t.rounds.length?e("div",{staticClass:"empty-state"},[t._v(" No program generated yet ")]):e("div",{staticClass:"rounds-list"},t._l(t.rounds,function(s){return e("div",{key:s.id,staticClass:"round-program"},[e("div",{staticClass:"round-header"},[t._v(" Round "+t._s(s.id)+" - "+t._s(s.distance)+"m ")]),e("table",{staticClass:"program-table"},[t._m(0,!0),e("tbody",t._l(s.horseIds,function(s,n){return e("tr",{key:s},[e("td",[t._v(t._s(n+1))]),e("td",[t._v(t._s(t.getHorseName(s)))])])}),0)])])}),0)]):t._e(),"results"===t.activeTab?e("div",{staticClass:"results-section"},[0===t.results.length?e("div",{staticClass:"empty-state"},[t._v(" No results yet ")]):e("div",{staticClass:"results-list"},t._l(t.results,function(s){return e("div",{key:s.roundId,staticClass:"round-result"},[e("div",{staticClass:"round-title"},[t._v(" Round "+t._s(s.roundId)+" â€” "+t._s(s.distance)+"m ")]),e("table",{staticClass:"results-table"},[t._m(1,!0),e("tbody",t._l(s.standings,function(s,n){return e("tr",{key:s.horseId},[e("td",[t._v(t._s(n+1))]),e("td",[t._v(t._s(t.getHorseName(s.horseId)))]),e("td",[t._v(t._s((s.timeMs/1e3).toFixed(2))+"s")])])}),0)])])}),0)]):t._e()])])},y=[function(){var t=this,e=t._self._c;t._self._setupProxy;return e("thead",[e("tr",[e("th",[t._v("Position")]),e("th",[t._v("Name")])])])},function(){var t=this,e=t._self._c;t._self._setupProxy;return e("thead",[e("tr",[e("th",[t._v("Position")]),e("th",[t._v("Horse")]),e("th",[t._v("Time (s)")])])])}],R=(0,n.pM)({name:"ResultsPanel",setup(){const t=u(),e=(0,n.KR)("program"),s=(0,n.EW)(()=>t.state.rounds),r=(0,n.EW)(()=>t.state.results),a=e=>{const s=t.getters.getHorseById(e);return s?s.name:""};return{activeTab:e,rounds:s,results:r,getHorseName:a}}}),w=R,x=(0,d.A)(w,b,y,!1,null,"3d670f52",null),I=x.exports,k=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{staticClass:"horse-list"},[e("h3",{staticClass:"title"},[t._v("Horse List (1-20)")]),t.horses.length?e("table",{staticClass:"horses-table"},[t._m(0),e("tbody",t._l(t.horses,function(s){return e("tr",{key:s.id},[e("td",[t._v(t._s(s.name))]),e("td",[t._v(t._s(s.condition))]),e("td",[e("div",{staticClass:"color-box",style:{backgroundColor:s.color}})])])}),0)]):e("div",{staticClass:"no-horse-list"},[t._v("No horses list yet")])])},H=[function(){var t=this,e=t._self._c;t._self._setupProxy;return e("thead",[e("tr",[e("th",[t._v("Name")]),e("th",[t._v("Condition")]),e("th",[t._v("Color")])])])}],E=(0,n.pM)({name:"HorseList",setup(){const t=u(),e=(0,n.EW)(()=>t.state.horses);return{horses:e}}}),M=E,P=(0,d.A)(M,k,H,!1,null,"136daf8d",null),A=P.exports,T=(0,n.pM)({name:"App",components:{RaceControls:v,RaceTrack:C,ResultsPanel:I,HorseList:A}}),F=T,S=(0,d.A)(F,r,a,!1,null,"6833132c",null),N=S.exports,O=s(5353);function W(t,e){return Math.floor(Math.random()*(e-t+1))+t}var B=function(t,e,s,n){function r(t){return t instanceof s?t:new s(function(e){e(t)})}return new(s||(s=Promise))(function(s,a){function o(t){try{u(n.next(t))}catch(e){a(e)}}function i(t){try{u(n["throw"](t))}catch(e){a(e)}}function u(t){t.done?s(t.value):r(t.value).then(o,i)}u((n=n.apply(t,e||[])).next())})},G=function(t,e){var s,n,r,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]},o=Object.create(("function"===typeof Iterator?Iterator:Object).prototype);return o.next=i(0),o["throw"]=i(1),o["return"]=i(2),"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function i(t){return function(e){return u([t,e])}}function u(i){if(s)throw new TypeError("Generator is already executing.");while(o&&(o=0,i[0]&&(a=0)),a)try{if(s=1,n&&(r=2&i[0]?n["return"]:i[0]?n["throw"]||((r=n["return"])&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(r=a.trys,!(r=r.length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(u){i=[6,u],n=0}finally{s=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};n.Ay.use(O.Ay);var j=new O.Ay.Store({state:{horses:[],rounds:[],results:[],currentRoundIndex:-1,status:"idle"},mutations:{setHorses:function(t,e){t.horses=e},setRounds:function(t,e){t.rounds=e},pushResult:function(t,e){t.results.push(e)},setStatus:function(t,e){t.status=e},setCurrentRoundIndex:function(t,e){t.currentRoundIndex=e},reset:function(t){t.horses=[],t.rounds=[],t.results=[],t.currentRoundIndex=-1,t.status="idle"}},actions:{generateGame:function(t){for(var e=t.commit,s=20,n=["#EF798A","#F7A9A8","#613F75","#E5C3D1","#988B8E","#ECC8AF","#E7AD99","#CE796B","#C18C5D","#495867","#0A0908","#22333B","#F2F4F3","#A9927D","#5E503F","#7209B7","#F72585","#4361EE","#06FFA5","#FFB703"],r=[],a=0;a<s;a++)r.push({id:a+1,name:"Horse ".concat(a+1),color:n[a],condition:W(1,100)});var o=[1200,1400,1600,1800,2e3,2200],i=o.map(function(t,e){var s=new Set;while(s.size<10)s.add(W(1,20));return{id:e+1,distance:t,horseIds:Array.from(s)}});e("reset"),e("setHorses",r),e("setRounds",i),e("setStatus","ready"),e("setCurrentRoundIndex",-1)},startRace:function(t){return B(this,arguments,void 0,function(t){var e,s=t.state,n=t.commit,r=t.dispatch;return G(this,function(t){switch(t.label){case 0:if("ready"!==s.status)return[2];n("setStatus","running"),e=0,t.label=1;case 1:return e<s.rounds.length?(n("setCurrentRoundIndex",e),[4,r("runRound",s.rounds[e])]):[3,5];case 2:return t.sent(),[4,new Promise(function(t){return setTimeout(t,600)})];case 3:t.sent(),t.label=4;case 4:return e++,[3,1];case 5:return n("setStatus","finished"),n("setCurrentRoundIndex",-1),[2]}})})},runRound:function(t,e){return B(this,arguments,void 0,function(t,e){var s,n,r,a,o,i,u,c=t.state,l=t.commit;return G(this,function(t){switch(t.label){case 0:for(s=[],n=function(t){var n=c.horses.find(function(e){return e.id===t}),r=2*e.distance,a=.6+n.condition/100,o=300*Math.random()-150,i=Math.max(800,Math.round(r/a+o));s.push({horseId:t,timeMs:i})},r=0,a=e.horseIds;r<a.length;r++)o=a[r],n(o);return s.sort(function(t,e){return t.timeMs-e.timeMs}),i={roundId:e.id,distance:e.distance,standings:s},l("pushResult",i),u=Math.max.apply(Math,s.map(function(t){return t.timeMs})),[4,new Promise(function(t){return setTimeout(t,u+200)})];case 1:return t.sent(),[2]}})})}},getters:{getHorseById:function(t){return function(e){return t.horses.find(function(t){return t.id===e})}},currentRound:function(t){return t.currentRoundIndex<0?null:t.rounds[t.currentRoundIndex]}}});n.Ay.config.productionTip=!1,new n.Ay({store:j,render:t=>t(N)}).$mount("#app")}},e={};function s(n){var r=e[n];if(void 0!==r)return r.exports;var a=e[n]={exports:{}};return t[n].call(a.exports,a,a.exports,s),a.exports}s.m=t,function(){var t=[];s.O=function(e,n,r,a){if(!n){var o=1/0;for(l=0;l<t.length;l++){n=t[l][0],r=t[l][1],a=t[l][2];for(var i=!0,u=0;u<n.length;u++)(!1&a||o>=a)&&Object.keys(s.O).every(function(t){return s.O[t](n[u])})?n.splice(u--,1):(i=!1,a<o&&(o=a));if(i){t.splice(l--,1);var c=r();void 0!==c&&(e=c)}}return e}a=a||0;for(var l=t.length;l>0&&t[l-1][2]>a;l--)t[l]=t[l-1];t[l]=[n,r,a]}}(),function(){s.d=function(t,e){for(var n in e)s.o(e,n)&&!s.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={524:0};s.O.j=function(e){return 0===t[e]};var e=function(e,n){var r,a,o=n[0],i=n[1],u=n[2],c=0;if(o.some(function(e){return 0!==t[e]})){for(r in i)s.o(i,r)&&(s.m[r]=i[r]);if(u)var l=u(s)}for(e&&e(n);c<o.length;c++)a=o[c],s.o(t,a)&&t[a]&&t[a][0](),t[a]=0;return s.O(l)},n=self["webpackChunkhorse_racing_game"]=self["webpackChunkhorse_racing_game"]||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))}();var n=s.O(void 0,[504],function(){return s(6979)});n=s.O(n)})();
//# sourceMappingURL=app.c77f4f57.js.map